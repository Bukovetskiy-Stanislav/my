<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–æ—ó –§—ñ–Ω–∞–Ω—Å–∏</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      background: #f3f4f6;
      color: #111827;
    }
    header {
      background: #1f2937;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: #374151;
      padding: 0.5rem 0;
    }
    nav button {
      background: none;
      color: white;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .container {
      max-width: 600px;
      margin: 1rem auto;
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    input, select, button {
      width: 50%;  /* –ó–º–µ–Ω—à–µ–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∫–Ω–æ–ø–æ–∫ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ */
      padding: 0.75rem;
      margin: 0.5rem 0;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #d1d5db;
    }
    button.submit-income {
      background-color: #10B981; /* –∑–µ–ª–µ–Ω–∏–π –¥–ª—è –¥–æ—Ö–æ–¥—É */
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
    button.submit-expense {
      background-color: #EF4444; /* —á–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –≤–∏—Ç—Ä–∞—Ç */
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
    h2, h3 {
      margin-top: 1rem;
    }
    .summary {
      background: #e5e7eb;
      padding: 1rem;
      border-radius: 8px;
    }
    .entry-list {
      margin-top: 1rem;
    }
    .entry {
      border-bottom: 1px solid #e5e7eb;
      padding: 0.5rem 0;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>–ú–æ—ó –§—ñ–Ω–∞–Ω—Å–∏</h1>
  </header>
  <nav>
    <button onclick="showTab('main')">üè† –ì–æ–ª–æ–≤–Ω–∞</button>
    <button onclick="showTab('journal')">üìî –ñ—É—Ä–Ω–∞–ª</button>
    <button onclick="showTab('exchange')">üí± –û–±–º—ñ–Ω</button>
  </nav>

  <div class="container" id="main">
    <h2>–î–æ–¥–∞—Ç–∏ –¥–æ—Ö—ñ–¥</h2>
    <input type="number" id="income-amount" placeholder="–°—É–º–∞ (CZK)">
    <button class="submit-income" onclick="addIncome()">–î–æ–¥–∞—Ç–∏</button>

    <h2>–î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É –Ω–∞ –∞–≤—Ç–æ–º–æ–±—ñ–ª—å</h2>
    <input type="number" id="auto-expense-amount" placeholder="–°—É–º–∞ (CZK)">
    <select id="auto-expense-category">
      <option value="–ü–∞–ª—å–Ω–µ">–ü–∞–ª—å–Ω–µ</option>
      <option value="–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ">–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ</option>
      <option value="–°—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ">–°—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ</option>
      <option value="–Ü–Ω—à–µ">–Ü–Ω—à–µ</option>
    </select>
    <button class="submit-expense" onclick="addAutoExpense()">–î–æ–¥–∞—Ç–∏</button>

    <h2>–î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É –Ω–∞ —Å–µ–±–µ</h2>
    <input type="number" id="personal-expense-amount" placeholder="–°—É–º–∞ (CZK)">
    <select id="personal-expense-category">
      <option value="–û—Ä–µ–Ω–¥–∞ –∂–∏—Ç–ª–∞">–û—Ä–µ–Ω–¥–∞ –∂–∏—Ç–ª–∞</option>
      <option value="–•–∞—Ä—á—É–≤–∞–Ω–Ω—è">–•–∞—Ä—á—É–≤–∞–Ω–Ω—è</option>
      <option value="–ú–µ–¥–∏—á–Ω–µ —Å—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è">–ú–µ–¥–∏—á–Ω–µ —Å—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è</option>
      <option value="–ú–æ–±—ñ–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞">–ú–æ–±—ñ–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞</option>
      <option value="–û–¥—è–≥">–û–¥—è–≥</option>
      <option value="–Ü–Ω—à–µ">–Ü–Ω—à–µ</option>
    </select>
    <button class="submit-expense" onclick="addPersonalExpense()">–î–æ–¥–∞—Ç–∏</button>

    <h2>–ü—ñ–¥—Å—É–º–∫–∏</h2>
    <div class="summary">
      <p>–ó–∞–≥–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥: <strong id="total-income">0</strong> CZK</p>
      <p>–ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏: <strong id="total-expenses">0</strong> CZK</p>
      <p>–ü—Ä–∏–±—É—Ç–æ–∫: <strong id="net-profit">0</strong> CZK</p>
      <p>üí∂ –ë–∞–ª–∞–Ω—Å –≤ EUR: <strong id="euro-balance">0</strong> EUR</p>
      <p>üíµ –ë–∞–ª–∞–Ω—Å –≤ USD: <strong id="usd-balance">0</strong> USD</p>
    </div>
  </div>

  <div class="container hidden" id="journal">
    <h2>–ñ—É—Ä–Ω–∞–ª –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç</h2>
    <div class="entry-list" id="entry-list"></div>
  </div>

  <div class="container hidden" id="exchange">
    <h2>–û–±–º—ñ–Ω –≤–∞–ª—é—Ç–∏</h2>
    <input type="number" id="czk-amount" placeholder="–°—É–º–∞ –≤ CZK">
    <input type="number" id="rate" placeholder="–ö—É—Ä—Å (CZK –∑–∞ 1 EUR/USD)">
    <select id="currency">
      <option value="EUR">–Ñ–≤—Ä–æ üí∂</option>
      <option value="USD">–î–æ–ª–∞—Ä üíµ</option>
    </select>
    <button class="submit-expense" onclick="convertCurrency()">–û–±–º—ñ–Ω—è—Ç–∏</button>
    <p id="converted-result"></p>
  </div>

  <script>
    let income = 0;
    let expenses = [];
    let journal = [];
    let balances = { EUR: 0, USD: 0 };

    // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ –∑ LocalStorage
    function loadData() {
      const storedData = JSON.parse(localStorage.getItem('financeData'));
      if (storedData) {
        income = storedData.income || 0;
        expenses = storedData.expenses || [];
        journal = storedData.journal || [];
        balances = storedData.balances || { EUR: 0, USD: 0 };
      }
    }

    // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –≤ LocalStorage
    function saveData() {
      const data = { income, expenses, journal, balances };
      localStorage.setItem('financeData', JSON.stringify(data));
    }

    // –§–æ—Ä–º–∞—Ç—É—î–º–æ –¥–∞—Ç—É
    function formatDate(date) {
      return date.toLocaleString('uk-UA', { dateStyle: 'short', timeStyle: 'short' });
    }

    // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    function updateDisplay() {
      const totalExpenses = expenses.reduce((sum, item) => sum + item.amount, 0);
      const profit = income - totalExpenses;

      document.getElementById('total-income').textContent = income.toFixed(2);
      document.getElementById('total-expenses').textContent = totalExpenses.toFixed(2);
      document.getElementById('net-profit').textContent = profit.toFixed(2);
      document.getElementById('euro-balance').textContent = balances.EUR.toFixed(2);
      document.getElementById('usd-balance').textContent = balances.USD.toFixed(2);

      const entryList = document.getElementById('entry-list');
      entryList.innerHTML = '';
      journal.slice().reverse().forEach(entry => {
        const div = document.createElement('div');
        div.className = 'entry';
        div.textContent = `${formatDate(entry.date)} - ${entry.type} ${entry.category ? '(' + entry.category + ')' : ''}: ${entry.amount.toFixed(2)} ${entry.currency || 'CZK'}`;
        entryList.appendChild(div);
      });
    }

    // –î–æ–¥–∞—Ç–∏ –¥–æ—Ö—ñ–¥
    function addIncome() {
      const amount = parseFloat(document.getElementById('income-amount').value);
      if (!isNaN(amount) && amount > 0) {
        income += amount;
        journal.push({ type: '–î–æ—Ö—ñ–¥', amount, date: new Date(), currency: 'CZK' });
        document.getElementById('income-amount').value = '';
        saveData();
        updateDisplay();
      }
    }

    // –î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É –Ω–∞ –∞–≤—Ç–æ–º–æ–±—ñ–ª—å
    function addAutoExpense() {
      const amount = parseFloat(document.getElementById('auto-expense-amount').value);
      const category = document.getElementById('auto-expense-category').value;
      if (!isNaN(amount) && amount > 0) {
        expenses.push({ amount, category });
        journal.push({ type: '–í–∏—Ç—Ä–∞—Ç–∞', amount, category, date: new Date(), currency: 'CZK' });
        document.getElementById('auto-expense-amount').value = '';
        saveData();
        updateDisplay();
      }
    }

    // –î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É –Ω–∞ —Å–µ–±–µ
    function addPersonalExpense() {
      const amount = parseFloat(document.getElementById('personal-expense-amount').value);
      const category = document.getElementById('personal-expense-category').value;
      if (!isNaN(amount) && amount > 0) {
        expenses.push({ amount, category });
        journal.push({ type: '–í–∏—Ç—Ä–∞—Ç–∞', amount, category, date: new Date(), currency: 'CZK' });
        document.getElementById('personal-expense-amount').value = '';
        saveData();
        updateDisplay();
      }
    }

    // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤–∞–ª—é—Ç–∏
    function convertCurrency() {
      const czkAmount = parseFloat(document.getElementById('czk-amount').value);
      const rate = parseFloat(document.getElementById('rate').value);
      const currency = document.getElementById('currency').value;

      if (!isNaN(czkAmount) && czkAmount > 0 && !isNaN(rate) && rate > 0) {
        const result = czkAmount / rate;
        balances[currency] += result;
        expenses.push({ amount: czkAmount, category: `–û–±–º—ñ–Ω —É ${currency}` });
        journal.push({ type: '–û–±–º—ñ–Ω', amount: result, category: `–∑ ${czkAmount} CZK`, date: new Date(), currency });
        document.getElementById('converted-result').textContent = `‚âà ${result.toFixed(2)} ${currency}`;
        document.getElementById('czk-amount').value = '';
        document.getElementById('rate').value = '';
        saveData();
        updateDisplay();
      } else {
        document.getElementById('converted-result').textContent = '–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ';
      }
    }

    // –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–∏–±—Ä–∞–Ω—É –≤–∫–ª–∞–¥–∫—É
    function showTab(tabId) {
      document.getElementById('main').classList.add('hidden');
      document.getElementById('journal').classList.add('hidden');
      document.getElementById('exchange').classList.add('hidden');
      document.getElementById(tabId).classList.remove('hidden');
    }

    // –ü–æ–∫–∞–∑–∞—Ç–∏ –≥–æ–ª–æ–≤–Ω—É –≤–∫–ª–∞–¥–∫—É –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    document.addEventListener('DOMContentLoaded', () => {
      loadData();  // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ
      showTab('main');
      updateDisplay();
    });
  </script>
</body>
</html>
